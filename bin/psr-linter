#!/usr/bin/env php

<?php

require_once __DIR__ . '/../vendor/autoload.php';

use \Commando\Command;

$cmd = new Commando\Command();

$cmd->option()
    ->require(true)
    ->describedAs('One or more files and/or directories to check')
    ->expectsFile();
$cmd
    ->setHelp('Validate php files according PSR2 standards' . PHP_EOL . PHP_EOL. 'Usage: psr-linter <file>');

$linter = new \PsrLinter\Linter();
$errors = $linter->validate(file_get_contents($cmd[0]));

if (empty($errors)) {
    exit(0);
}

file_put_contents('php://stderr', \PsrLinter\Reporter::stdout($errors));
